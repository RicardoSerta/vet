{% extends 'base_app.html' %}
{% load static %}

{% block title %}Meu Perfil - LumaVet{% endblock %}
{% block page_title %}Meu Perfil{% endblock %}

{% block main_content %}
<div class="card">
    <h2 class="card-title">Dados do usuário</h2>

    <div class="profile-grid">
        <!-- FORMULÁRIO -->
        <div>
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}

                <div class="profile-form-row">
                    <div class="profile-form-group">
                        <label for="id_name">Nome:</label>
                        <input type="text" id="id_name" name="name"
                               value="{{ request.user.first_name }}">
                    </div>

                    <div class="profile-form-group">
                        <label for="id_email">E-mail:</label>
                        <input type="email" id="id_email" name="email"
                               value="{{ request.user.email }}">
                    </div>
                </div>

                <div class="profile-form-row">
                    <div class="profile-form-group">
                        <label for="id_whatsapp">Telefone:</label>
                        <input type="text" id="id_whatsapp" name="whatsapp"
                               value="{{ profile.whatsapp }}">
                    </div>

                    <div class="profile-form-group">
                        <label for="id_password">Nova senha:</label>
                        <input type="password" id="id_password" name="password" placeholder="Deixar em branco para não alterar">
                        <div class="field-hint">
                            A senha atual não é exibida. Preencha aqui apenas se quiser trocar.
                        </div>
                    </div>
                </div>

                <div class="profile-form-row">
                    <div class="profile-form-group">
                        <label for="id_photo">Foto de perfil:</label>
                        <input type="file" id="id_photo" name="photo" accept="image/*">
                        <div class="field-hint">
                            Envie uma imagem quadrada, de preferência.
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn-primary">Salvar alterações</button>
            </form>
        </div>

        <!-- FOTO GRANDE AO LADO -->
        <div class="profile-photo-card">
            {% if profile.photo %}
                <img src="{{ profile.photo.url }}" alt="Foto de perfil" class="profile-photo">
            {% else %}
                <img src="{% static 'accounts/img/avatar-placeholder.png' %}" alt="Foto de perfil" class="profile-photo">
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

